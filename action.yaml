name: Publish MD Files
description: Publishes MD files from GitHub to Confluence
inputs:
  space:
    description: 'Space of your page'
    required: true

runs:
  using: composite
  steps:

  - 
    name: Checkout code
    uses: actions/checkout@v4

  -
    name: Set up Python 3.12
    uses: actions/setup-python@v4
    with:
      python-version: 3.12

  -
    name: Install the library
    shell: bash
    run: |
      python3 -m venv .venv
      source .venv/bin/activate
      python3 -m pip install md2cf
  
  -
    name: Publish Docs
    shell: bash
    run: md2cf --host 'https://confluence.minyma.io/rest/api' --token '${{ secrets.CONFLUENCE_API_TOKEN }}' --space ${{ inputs.space }} ${{ inputs.doc-space }

